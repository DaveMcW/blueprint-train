

Things we need to encode:

Automatic/manual (use on/off)
Fuel type (item)
Train length (3 bytes)
Original direction (1 byte)
Version (item)
Color (3 bytes)
Schedule size (2 bytes)
Current schedule (2 byte)

Schedule {
  Station name (51 bytes)
  Wait until (n: 2 bytes) {
    And/or (1 bit)
    Condition (type: 4 bits) {
      Time passed (3.3 bytes)
      Inactivity (3.3 bytes)
      Inventory full
      Inventory empty
      Item count {
        Item 1 (item)
        Comparator (1 byte)
        Item 2 (item)
        Constant (4 bytes)
      }
      Circuit condition {
        Item 1 (item + wildcard)
        Comparator (1 byte)
        Item 2 (item)
        Constant (4 bytes)
      }
      Fluid count {
        Item 1 (item)
        Comparator (1 byte)
        Item 2 (item)
        Constant (4 bytes)
      }
    }
  }
}


Known issues:
New blueprints need to be saved before you can see the trains. Press Shift while creating a blueprint to automatically save it.
Trains that are close together may merge into one.  Add a few extra tiles between signals to prevent this.
Some intersections are impossible to build in because the trains snap to the wrong track.
Diagonal trains don't display properly in blueprint preview.
Trains cannot travel through blueprints, and manually building on top of ghost trains does not work. Related to https://forums.factorio.com/viewtopic.php?f=7&t=61842

Features:
Locomotive schedule, fuel, and color.
Cargo wagon filters.
Trains in automatic mode start moving when fully built.
Press the button to stop adding trains to new blueprints. Existing blueprints with trains still work.

TODO:
Deconstruct trains
Blueprint vehicles
